name = "flayve"
compatibility_date = "2024-01-01"
pages_build_output_dir = "dist"
migrations_dir = "migrations"  # RC1: Fix - Wrangler agora encontra as migrations

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "webapp-production"
database_id = "b6e327ad-e5d2-4d9c-bdff-2ce790d8933f"

# R2 Storage binding
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "flayve-assets"

# Environment variables (configure via Cloudflare Dashboard > Pages > Settings > Environment variables)
# üîê OBRIGAT√ìRIAS:
# JWT_SECRET
# LIVEKIT_API_KEY
# LIVEKIT_API_SECRET
# LIVEKIT_URL
# MERCADO_PAGO_ACCESS_TOKEN
# SENDGRID_API_KEY
#
# üÜï RC1 - OPCIONAIS:
# PUBLIC_URL (ex: https://flayve.pages.dev) - Para webhooks Mercado Pago
# ALLOWED_ORIGINS (ex: https://www.seudominio.com,https://seudominio.com) - Dom√≠nios customizados

[build]
command = "npm run build"
cwd = ""

[build.upload]
format = "directory"
dir = "dist"

# Advanced settings for Pages Functions
[functions]
compatibility_flags = ["nodejs_compat"]
